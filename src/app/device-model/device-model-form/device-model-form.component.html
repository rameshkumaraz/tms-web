<div class="modal-header">
  <h4 class="modal-title" id="modal-basic-title">{{ pageHeader }}</h4>
  <button type="button" class="close" aria-label="Close" (click)="close(false)">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <form [formGroup]="modelForm">

    <div class="form-row">
      <div class="form-group col-sm-8 required">
        <label for="brand" class="asterisk-if-mandatory">Brand</label>
        <select required class="form-control" formControlName="brand" id="brand"
          [ngClass]="{ 'is-invalid': formSubmitted && f.brand.errors }">
          <option value="" disabled selected>Select Brand</option>
          <option *ngFor="let b of brands" [value]="b.id">{{b.name}}</option>
        </select>
        <div *ngIf="formSubmitted && f.brand.errors" class="invalid-feedback">
          <div *ngIf="f.brand.errors.required">Brand is required</div>
          <div *ngIf="f.brand.errors?.minlength">Brand must be at least 1 characters long.</div>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-sm-8 required">
        <label for="name" class="asterisk-if-mandatory">Name</label>
        <input required formControlName="name" id="name" type="text" class="form-control" autocomplete="off"
          [ngClass]="{ 'is-invalid': formSubmitted && f.name.errors }">
        <div *ngIf="formSubmitted && f.name.errors" class="invalid-feedback">
          <div *ngIf="f.name.errors.required">Name is required</div>
          <div *ngIf="f.name.errors?.minlength">Name must be at least 5 characters long.</div>
          <div *ngIf="f.name.errors?.pattern">Name accepts combination of alphanumeric, - and _. Should start and end with alphanumeric.</div>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-sm-4 required">
        <label for="modelVersion" class="asterisk-if-mandatory">Version</label>
        <input required formControlName="modelVersion" id="modelVersion" type="text" class="form-control"
          autocomplete="off" [ngClass]="{ 'is-invalid': formSubmitted && f.modelVersion.errors }">
        <div *ngIf="formSubmitted && f.modelVersion.errors" class="invalid-feedback">
          <div *ngIf="f.modelVersion.errors.required">Version is required</div>
          <div *ngIf="f.modelVersion.errors?.minlength">Version must be at least 1 characters long.</div>
        </div>
      </div>
      <div class="form-group col-sm-4 required">
        <label for="baseVersion" class="asterisk-if-mandatory">Base Version</label>
        <input required formControlName="baseVersion" id="baseVersion" type="text" class="form-control"
          autocomplete="off" [ngClass]="{ 'is-invalid': formSubmitted && f.baseVersion.errors }">
        <div *ngIf="formSubmitted && f.baseVersion.errors" class="invalid-feedback">
          <div *ngIf="f.baseVersion.errors.required">Base Version is required</div>
          <div *ngIf="f.baseVersion.errors?.minlength">Base Version must be at least 1 characters long.</div>
        </div>
      </div>
      <div class="form-group col-sm-4 required"></div>
    </div>
    <div class="form-row" *ngIf="actionType == actionEnum.add">
      <div class="form-group col-sm-8">
        <label for="modelImage" class="asterisk-if-mandatory">Device Model Image</label>
        <input id="modelImage" type="file" class="form-control-file file-cls" (change)="onFileChange($event)"
          [ngClass]="{ 'is-invalid': formSubmitted && f.modelImageName.errors }" accept=".png, .gif, .jpeg">
        <!-- <input id="bundleName" type="file" class="form-control-file file-cls" (change)="onFileChange($event)" hidden> -->
        <div *ngIf="formSubmitted && f.modelImageName.errors" class="invalid-feedback">
          <div *ngIf="f.modelImageName.errors.required">Image is required.</div>
        </div>
      </div>
      <div class="form-group col-sm-4" style="padding-top: 15px;">
        <img [src]='filePath' width="40" height="60" *ngIf="filePath">
      </div>
    </div>
    <div class="form-row" *ngIf="actionType == actionEnum.edit">
      <div class="form-group col-sm-4">
        <label for="modelImage" class="asterisk-if-mandatory">Device Model Image</label>
        <img [src]='filePath' width="40" height="60">
      </div>
      <div class="form-group col-sm-8" style="padding-top: 40px;">
        <input id="modelImage" type="file" class="form-control-file file-cls" (change)="onFileChange($event)"
          [ngClass]="{ 'is-invalid': formSubmitted && f.modelImageName.errors }" accept=".png, .gif, .jpeg">
        <div *ngIf="formSubmitted && f.modelImageName.errors" class="invalid-feedback">
          <div *ngIf="f.modelImageName.errors.required">Image is required.</div>
        </div>
      </div>
    </div>
    <div class="form-row" *ngIf="actionType == actionEnum.view">
      <div class="form-group col-sm-12">
        <label for="modelImage" class="asterisk-if-mandatory">Device Model Image</label>
        <span style="display:block; overflow-y: visible;"><img
            [src]='filePath' width="40" height="60"></span>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-sm-12">
        <label for="desc">Description</label>
        <textarea formControlName="desc" id="desc" autocomplete="off" rows="3" cols="80" class="form-control"
          [ngClass]="{ 'is-invalid': formSubmitted && f.desc.errors }">  </textarea>
        <div *ngIf="formSubmitted && f.desc.errors" class="invalid-feedback">
          <div *ngIf="f.desc.errors.minlength">Description must be at least 6 characters long.</div>
        </div>
      </div>
    </div>
</form>

<div class="button-block">
  <span class="pr-2"><button type="button" class="btn btn-primary form-button-cancel"
      (click)="close(false)">Cancel</button>
  </span>
  <button type="button" class="btn btn-primary form-button-action" (click)="save()"
    *ngIf="actionType == actionEnum.add">Save</button>
  <button type="button" class="btn btn-primary form-button-action" (click)="edit()"
    *ngIf="actionType == actionEnum.view && canEdit(model.status)">Edit</button>
  <span class="pl-2" *ngIf="actionType == actionEnum.view && canDelete(model.status)"><button type="button"
      class="btn btn-primary form-button-action" (click)="delete()">Delete</button></span>
  <button type="button" class="btn btn-primary form-button-action" (click)="update()"
    *ngIf="actionType == actionEnum.edit && canEdit(model.status)">Update</button>

</div>
</div>
