<div class="main">
    <div class="container-fluid">
      <div class="row page-header">
        <div class="col-sm-3 title"><img src="../../../assets/images/merchant.svg" />
          <span class="pl-2">{{ pageHeader }}</span>
          <span class="count pl-2">({{ jobCount }})</span></div>
        <div class="col-sm-9 tools text-right">
          <button class="button" (click)="create(jobModal)">
            <fa-icon [icon]='faPlus' size="lg"></fa-icon><span class="pl-2">Add
              New Event</span>
          </button>
        </div>
      </div>
      <div *ngIf="jobCount === 0" class="info">
        No events are created yet.
        <ul>
          <li>New event can be created by using <span class="info-highlight">Add New Event</span> option.</li>
        </ul>
      </div>
      <div class="pt-2" *ngIf="jobCount > 0">
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col" style="width: 15%;">Name</th>
              <th scope="col" style="width: 8%;">Trigger Type</th>
              <th scope="col" style="width: 10%;">Event Type</th>
              <th scope="col" style="width: 8%;">Event Date</th>
              <th scope="col" style="width: 8%;">Target</th>
              <th scope="col" style="width: 10%;">Event Status</th>
              <th scope="col" style="width: 8%;">Status</th>
              <th scope="col" style="width: 10%;">Last Update By</th>
              <th scope="col" style="width: 10%;">Last Update On</th>
              <th scope="col" style="width: 10%;">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let job of jobs | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
              <td><a [routerLink]="['/eDetail']" [queryParams]="{ id: job.id}" > <span class="table-col-name">{{ job.name }}</span></a></td>
              <td>{{ job.triggerType}}</td>
              <td>{{ job.jobType }}</td>
              <td>{{ job.jobDate | date: 'dd/MM/yyyy HH:mm'}}</td>
              <td *ngIf="job.targetType == 1">All Locations</td>
              <td *ngIf="job.targetType == 2">{{ job.locationNames }}</td>
              <td *ngIf="job.targetType == 3">{{ job.deviceNames }}</td>
              <td></td>
              <td>{{ getStatus(job.status) }}</td>
              <td>{{ job.lastUpdatedBy }}</td>
              <td>{{ job.updatedDate | date: 'dd/MM/yyyy HH:mm'}}</td>
              <td><span class="pr-3"><a (click)="view(job.id, jobModal)" routerLinkActive="active">
                    <fa-icon [icon]='faEye' style="color:#1653da"></fa-icon>
                  </a></span>
                <!-- <span class="pr-3" *ngIf="job.triggerType == triggerEnum.LATER"><a (click)="edit(job.id, jobModal)" routerLinkActive="active">
                    <fa-icon [icon]='faEdit' style="color:#ffc107;"></fa-icon>
                  </a></span> -->
                <span class="pr-3"><a (click)="delete(job.id)" routerLinkActive="active">
                    <fa-icon [icon]='faArchive' style="color: #dc3545;"></fa-icon>
                  </a></span></td>
            </tr>
          </tbody>
        </table>
        <div class="d-flex justify-content-between px-2">
            <ngb-pagination [collectionSize]="jobCount" [(page)]="page" [pageSize]="pageSize">
            </ngb-pagination>
      
            <select [(ngModel)]="pageSize">
              <option [ngValue]="5">5 items per page</option>
              <option [ngValue]="10">10 items per page</option>
              <option [ngValue]="25">25 items per page</option>
            </select>
          </div>
      </div>
      
    </div>
  </div>
  <ng-template #jobModal let-modal>
    <app-job-form [actionType]="actionType" [merchant]="merchant" [job]="job" (modelClosed)='closeModal($event)'></app-job-form>
  </ng-template>